<!doctype html>
<html lang="it">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Dettaglio Socio</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: "Helvetica", "Arial", sans-serif;
                color: #333;
                padding: 22px;
                background: #fff;
                font-size: 13px;
            }

            .header {
                text-align: center;
                margin-bottom: 18px;
                border-bottom: 2px solid #2980b9;
                padding-bottom: 12px;
            }

            .header h1 {
                color: #2980b9;
                font-size: 22px;
                margin-bottom: 5px;
                text-transform: uppercase;
                letter-spacing: 1px;
            }

            .header h2 {
                color: #34495e;
                font-size: 18px;
                font-weight: normal;
                margin-bottom: 10px;
            }

            .header .meta {
                color: #7f8c8d;
                font-size: 11px;
                font-style: italic;
            }

            .section {
                margin-bottom: 14px;
            }

            .section-title {
                background: #ecf0f1;
                color: #2c3e50;
                padding: 7px 13px;
                font-size: 13px;
                font-weight: bold;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                margin-bottom: 9px;
                border-left: 3px solid #2980b9;
            }

            .info-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 7px;
                margin-bottom: 7px;
            }

            .info-item {
                background: #f8f9fa;
                padding: 9px 11px;
                border-radius: 2px;
                border: 1px solid #e9ecef;
            }

            .info-item.full-width {
                grid-column: 1 / -1;
            }

            .info-label {
                font-size: 10px;
                color: #6c757d;
                text-transform: uppercase;
                font-weight: bold;
                margin-bottom: 4px;
                letter-spacing: 0.3px;
            }

            .info-value {
                font-size: 12px;
                color: #2c3e50;
                font-weight: 500;
            }

            table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 7px;
                font-size: 11px;
            }

            table thead {
                background: #3498db;
                color: white;
            }

            table th {
                padding: 7px 8px;
                text-align: left;
                font-weight: bold;
                text-transform: uppercase;
                font-size: 10px;
                letter-spacing: 0.3px;
            }

            table td {
                padding: 6px 8px;
                border-bottom: 1px solid #e9ecef;
            }

            table tbody tr:nth-child(even) {
                background: #f8f9fa;
            }

            table tbody tr:hover {
                background: #e3f2fd;
            }

            .status-paid {
                color: #27ae60;
                font-weight: bold;
            }

            .status-unpaid {
                color: #e74c3c;
                font-weight: bold;
            }

            .total-row {
                background: #3498db !important;
                color: white;
                font-weight: bold;
            }

            .total-row td {
                border: none;
                padding: 7px 8px;
            }

            .no-data {
                text-align: center;
                padding: 22px;
                color: #95a5a6;
                font-style: italic;
                background: #f8f9fa;
                border-radius: 2px;
                font-size: 12px;
            }

            .signature-section {
                margin-top: 28px;
                padding-top: 20px;
                border-top: 1px solid #ecf0f1;
            }

            .signature-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 30px;
                margin-top: 20px;
            }

            .signature-field {
                text-align: center;
            }

            .signature-label {
                font-size: 11px;
                color: #7f8c8d;
                margin-bottom: 7px;
                font-weight: bold;
            }

            .signature-line {
                border-bottom: 1px solid #2c3e50;
                height: 38px;
                margin-bottom: 5px;
            }

            .text-center {
                text-align: center;
            }

            .text-right {
                text-align: right;
            }

            @media print {
                body {
                    padding: 18px;
                }
            }
        </style>
    </head>
    <body>
        <div class="header">
            <h1>Circolo Nautico Cattolica</h1>
            <div class="meta">
                Stagione {{.SeasonCode}} - Documento generato il
                {{.GeneratedDate}}
            </div>
        </div>

        <div class="section">
            <div class="section-title">Informazioni Personali</div>
            <div class="info-grid">
                <div class="info-item">
                    <div class="info-label">Nome</div>
                    <div class="info-value">{{.Member.FirstName}}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Cognome</div>
                    <div class="info-value">{{.Member.LastName}}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Email</div>
                    <div class="info-value">{{.Member.Email}}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Data di Nascita</div>
                    <div class="info-value">{{.Member.BirthDate}}</div>
                </div>
                {{if .Member.PhoneNumbers}}
                <div class="info-item full-width">
                    <div class="info-label">Telefono</div>
                    <div class="info-value">
                        {{range $index, $phone := .Member.PhoneNumbers}} {{if
                        $index}}, {{end}}{{$phone.Number}} {{end}}
                    </div>
                </div>
                {{end}} {{if .Member.Addresses}}
                <div class="info-item full-width">
                    <div class="info-label">Indirizzo</div>
                    <div class="info-value">
                        {{with index .Member.Addresses 0}} {{.Street}}
                        {{.StreetNumber}}, {{.ZipCode}} {{.City}}, {{.Country}}
                        {{end}}
                    </div>
                </div>
                {{end}}
            </div>
        </div>

        {{if .Member.Memberships}}
        <div class="section">
            <div class="section-title">Tessere Associative</div>
            <table>
                <thead>
                    <tr>
                        <th>Numero</th>
                        <th>Stato</th>
                        <th>Valida Da</th>
                        <th>Scade Il</th>
                        <th class="text-right">Prezzo</th>
                        <th class="text-center">Stato Pagamento</th>
                    </tr>
                </thead>
                <tbody>
                    {{range .Member.Memberships}}
                    <tr>
                        <td>{{.Number}}</td>
                        <td>{{.Status}}</td>
                        <td>{{.ValidFrom}}</td>
                        <td>{{.ExpiresAt}}</td>
                        <td class="text-right">{{printf "%.2f" .Price}} EUR</td>
                        <td
                            class="text-center {{if .Paid}}status-paid{{else}}status-unpaid{{end}}"
                        >
                            {{if .Paid}}Pagato{{else}}Non Pagato{{end}}
                        </td>
                    </tr>
                    {{end}}
                </tbody>
            </table>
        </div>
        {{end}}

        <div class="section">
            <div class="section-title">
                Servizi Affittati - Stagione {{.SeasonCode}}
            </div>
            {{if .Facilities}}
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Tipo Servizio</th>
                        <th class="text-right">Prezzo</th>
                        <th class="text-center">Pagamento</th>
                        <th>Imbarcazione</th>
                    </tr>
                </thead>
                <tbody>
                    {{range .Facilities}}
                    <tr>
                        <td>{{.FacilityIdentifier}}</td>
                        <td>{{.FacilityName}}</td>
                        <td class="text-right">{{printf "%.2f" .Price}} EUR</td>
                        <td
                            class="text-center {{if .Paid}}status-paid{{else}}status-unpaid{{end}}"
                        >
                            {{if .Paid}}Pagato{{else}}Non Pagato{{end}}
                        </td>
                        <td>{{if .BoatName}}{{.BoatName}}{{else}}-{{end}}</td>
                    </tr>
                    {{end}}
                    <tr class="total-row">
                        <td colspan="2" class="text-right">TOTALE SERVIZI:</td>
                        <td class="text-right">
                            {{printf "%.2f" .TotalFacilitiesPrice}} EUR
                        </td>
                        <td colspan="2"></td>
                    </tr>
                </tbody>
            </table>
            {{else}}
            <div class="no-data">
                Nessun servizio affittato per questa stagione
            </div>
            {{end}}
        </div>

        <div class="signature-section">
            <div class="signature-grid">
                <div class="signature-field">
                    <div class="signature-label">Data</div>
                    <div class="signature-line"></div>
                </div>
                <div class="signature-field">
                    <div class="signature-label">Firma</div>
                    <div class="signature-line"></div>
                </div>
            </div>
        </div>
    </body>
</html>
